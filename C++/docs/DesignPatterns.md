# 设计模式

> 每一个模式描述了一个在我们周围不断重复发生的问题，以及该问题的结局方案的核心。这样你就能一次一次的额使用该方案而不必做重复劳动。 ——`Christopher Alex`

  

## 目标

* 理解**松耦合**设计思想
* 掌握**面向对象设计**原则
* 掌握**重构**技法改善设计
* 掌握`GOF`(Gun Of Four)核心设计模式  

> 软件设计的目标是**复用**——抵御变化！  



## 参考资料

* 设计模式-可复用面向对象软件的基础

>  `可复用`是目标，`面向对象`是实现的方法，共有23种设计模式



## 8种面向对象设计原则

* 依赖倒置原则(DIP)
  * 高层模块(稳定)不应该依赖于底层模块(变化)，二者都应该依赖于抽象(稳定)
  * 抽象(稳定)不应该依赖于实现细节(变化)，实现细节应该依赖于抽象(稳定)
* 开放封闭原则(OCP)
  * 对扩展开放，对更改封闭
  * 类模块应该是可扩展的，但是不可修改

* 单一职责原则(SRP)
  * 一个类应该仅有一个引起它变化的原因
  * 变化的方向隐含着类的责任
* `Liskov`替换原则(LSP)
  * 子类必须能够替换它们的基类(IS-A)
  * 继承表达类型抽象
* 接口隔离原则(ISP)
  * 不应该强迫客户程序依赖它们不用的方法
  * 接口应该小而完备
* 优先使用对象组合，而不是类继承
  * 类继承通常为“白箱复用”，对象组合通常为“黑箱复用”
  * 继承在某种程度上破坏了封装性，子类父类耦合度高
  * 而对象组合则只要求被组合的对象具有良好定义的接口，耦合度低
* 封装变化点
  * 使用封装来创建对象之间的分界层，让设计者可以在一侧进行修改，而不会对另一侧产生不良的影响，从而实现层次间的松耦合
* 针对接口编程，而不是针对实现编程
  * 不将变量类型声明为某个特定的具体类，而是声明为某个接口
  * 客户程序无需获知对象的具体类型，只需要知道对象所具有的接口
  * 减少系统中各部分的依赖关系，从而实现“高内聚，松耦合”的类型设计方案



## 23种经典设计模式

> 重构获得模式 `Refactoring to Patterns`.    
>
> 重构关键技法：
>
> * 静态——动态
> * 早绑定——晚绑定
> * 继承——组合(类包含)
> * 编译时依赖——运行时依赖
> * 紧耦合——松耦合
>
> 现代软件设计的特征是“需求的频繁变化”。设计模式的要点是“**寻找变化点，然后在变化点处应用设计模式**，从而来更好地应对需求的变化”。**什么时候，什么地点应用设计模式逼设计模式结构本身更为重要。**  
>
> **设计模式最大的作用，就是在变化和稳定之间寻找隔离点。**

### 组件协作

> 现代软件专业化分工之后的第一个结果是“**框架与应用程序的划分**”，“组件协作”通过**晚期绑定**，来实现框架与应用之间的**松耦合**，是二者之间协作时候常用的模式

* [Template Method](../src/DesignPattern/TemplateMethod.cpp)
* Strategy
* Observer/Event

### 单一职责

* Decorator
* Bridge

### 对象创建

* Factory Method
* Abstract Factory
* Prototype
* Builder

### 对象性能

* Singleton
* Flyweight

### 接口隔离

* Facade
* Proxy
* Mediator
* Adapter

### 状态变化

* Memento
* State

### 数据结构

* Composite
* Iterator
* Chain of Resposibility

### 行为变化

* Command
* Visitor

### 领域问题

* Interpreter